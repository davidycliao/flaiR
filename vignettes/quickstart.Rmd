---
title: "Quick Start"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Quick Start}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r include=FALSE}
library(reticulate)
library(flaiR)
reticulate::py_install("flair")
system(paste(reticulate::py_config()$python, "-m pip install flair"))
```

## Install `flaiR` with Using [`remotes`](https://github.com/r-lib/remotes)

<div style="text-align: justify">

`flaiR` is built on top of the reticulate package and incorporates key functions to access the core features of __FlairNLP__, returning data in a tidy and clean [`data.table`](https://cran.r-project.org/web/packages/data.table/index.html). The installation consists of two parts: first, install [Python 3.7](https://www.python.org/downloads/) or higher, and second, install [R](https://cran.r-project.org) (version 3.6.3 or higher) along with RStudio. ~~Additionally, you'll also need [`Anaconda`](Anaconda) to assist `reticulate` in setting up your Python environment, as well as enabling your RStudio to identify the environment.~~

__System Requirement:__

- Python (>= 3.7.0)

- R (>= 3.6.3)

- RStudio ___(recommended)___

- Anaconda ___(optional)___



If you're using Python-based packages in R for the first time, such as {`flaiR`} or {`reticulate`}, you probably haven't installed a Conda environment yet. When loading flaiR in R, two main steps occur. First, __a [conda](https://docs.conda.io/projects/conda/en/4.6.0/_downloads/52a95608c49671267e40c689e0bc00ca/conda-cheatsheet.pdf) environment is created through {[reticulate](https://ugoproto.github.io/ugo_r_doc/pdf/reticulate.pdf)}__. During this process, you will observe numerous messages related to the installation of the Python environment and the Python flair module. Notably, flair has numerous dependencies, including libraries related to transformers (like the HuggingFace). Thus, the installation might take some time to complete. 

When you copy the command below, you will generally be asked to upgrade the package. This is because this package operates on the {`reticulate`}, and when your packages in R are  outdated, RStudio would likely display __“These packages have more recent versions available.”__ to prompt you to update. We recommend that you update.


```
install.packages("remotes")
remotes::install_github("davidycliao/flaiR", force = TRUE)
library(flaiR)
```

Afterward, you might see the message __"Virtual environment 'r-reticulate' successfully created."__ Next, you will be prompted to confirm whether or not you want to use `r-reticulate`. Enter __"Yes,"__ and it will automatically install `flair` via your conda environment in Python.  If there are any issues with the installation, feel free to ask in the <u>[Discussion](https://github.com/davidycliao/flaiR/discussions)</u>.

</div>

&nbsp;


-----

## Wrapped Functions Integrating Modules (Classes and Object) into R


| **Wrapped Functions: Integrating Modules into R** | Corresponding Practice in Python                          | 
|---------------------------------------------------|-----------------------------------------------------------|
| `flair_datasets()`                                | from flair.datasets import *                              |
| `flair_data.sentence()`                           | from flair.data import Sentence                           |
| `flair_nn.classifier_load()`                      | from flair.nn import Classifier                           |
| `flair.embeddings.TransformerWordEmbeddings()`    | from flair.embeddings import TransformerWordEmbeddings    |
| `flair_embeddings.WordEmbeddings()`               | from flair.embeddings import WordEmbeddings               |
| `segtok_sentence_splitter()`                      | flair_splitter.SegtokSentenceSplitter                     |
| `flair_models.sequencetagger()`                   | from flair.models import SequenceTagger                   |
| `flair_trainers()`                                | from flair.trainers import *                              |



## Featured Functions for Streamlining NLP Tasks with data.table Output


| **Core Tagging Features**                    | Loader                     | Supported Models                                                                                                         |
|----------------------------------------------|----------------------------|--------------------------------------------------------------------------------------------------------------------------|
| `get_entities()`, `get_entities_batch()`     | `load_tagger_ner()`        | `en` (English), `fr` (French), `da` (Danish), `nl` (Dutch), and more.                                                    |
| `get_pos()`, `get_pos_batch()`               | `load_tagger_pos()`        | `pos` (English POS), `fr-pos` (French POS), `de-pos` (German POS), `nl-pos` (Dutch POS), and more.                       |
| `get_sentiments()`, `get_sentiments_batch()` | `load_tagger_sentiments()` | `sentiment` (English) , `sentiment-fast `(English) , `de-offensive-language` (German offensive language detection model) |

### __Tagging Parts-of-Speech with Flair Models__

<div style="text-align: justify">

You can load the pre-trained model `"pos-fast"`. For more pre-trained models, see https://flairnlp.github.io/docs/tutorial-basics/part-of-speech-tagging#-in-english.

</div>

```{r}
texts <- c("UCD is one of the best universities in Ireland.",
           "UCD has a good campus but is very far from my apartment in Dublin.",
           "Essex is famous for social science research.",
           "Essex is not in the Russell Group, but it is famous for political science research and in 1994 Group.",
           "TCD is the oldest university in Ireland.",
           "TCD is similar to Oxford.")

doc_ids <- c("doc1", "doc2", "doc3", "doc4", "doc5", "doc6")
```

```{r}
library(flaiR)
```

```{r}
tagger_pos <- load_tagger_pos("pos-fast")
```

```{r}
results <- get_pos(texts, doc_ids, tagger_pos)
head(results, n = 10)
```


### __Tagging Entities with Flair Models__

<div style="text-align: justify">

Load the pretrained model "ner". For more pretrained models, see https://flairnlp.github.io/docs/tutorial-basics/tagging-entities.

</div>

```{r}
library(flaiR)
```

```{r}
tagger_ner <- load_tagger_ner("ner")
```

```{r}
results <- get_entities(texts, doc_ids, tagger_ner)
head(results, n = 10)
```

### __Tagging Sentiment__

<div style="text-align: justify">
Load the pretrained model "`sentiment`". The pre-trained models of "`sentiment`", "`sentiment-fast`", and "`de-offensive-language`" are currently available. For more pretrained models, see https://flairnlp.github.io/docs/tutorial-basics/tagging-sentiment.

</div>

```{r}
library(flaiR)
```

```{r}
tagger_sent <- load_tagger_sentiments("sentiment")
```


```{r}
results <- get_sentiments(texts, doc_ids, tagger_sent)
head(results, n = 10)
```

&nbsp;

-----


## How to Contribute

<div style="text-align: justify">


Currently, I am engaged as a postdoctoral researcher at UCD, immersed in numerous ongoing projects and tasks. Consequently, my availability to maintain, test, and create examples for R users may be limited. I warmly invite R users who share similar interests to join in contributing to this package. Contributions – whether they be comments, code suggestions, tutorial examples, or forking the repository – are greatly appreciated. Please note that the `flaiR` is released with the [Contributor Code of Conduct](https://github.com/davidycliao/flaiR/blob/master/CONDUCT.md). By contributing to this project, you agree to abide by its terms. 

</div>





<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="flaiR">
<title>Quick Start • flaiR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.7/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.7/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quick Start">
<meta property="og:description" content="flaiR">
<meta property="og:image" content="https://davidycliao.github.io/flaiR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-3ZG40PPG98"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3ZG40PPG98');
</script><script defer data-domain="{YOUR DOMAIN},all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-inverse navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">flaiR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--quick-start">
    <span class="fa fa-rocket"></span>
     
    Quick Start
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--quick-start">
    <a class="dropdown-item" href="../articles/quickstart.html#why-write-%7BflaiR%7D-to-access-fair-nlp-in-python">Why {flaiR}</a>
    <a class="dropdown-item" href="../articles/quickstart.html#install-flair-with-using-remotes">Install flaiR via GitHub</a>
    <a class="dropdown-item" href="../articles/quickstart.html#wrapped-functions">Wrapped Functions</a>
    <a class="dropdown-item" href="../articles/quickstart.html#embeddings">FlaiR Embeddings</a>
    <a class="dropdown-item" href="../articles/quickstart.html#featured-functions-for-nlp-tasks-with-data-table-output">Featured Functions in flaiR</a>
    <a class="dropdown-item" href="../articles/quickstart.html#how-to-contribute">How to Contribute</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--tutorial-in-r">
    <span class="fa fa-project-diagram"></span>
     
    Tutorial in R
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--tutorial-in-r">
    <a class="dropdown-item" href="../articles/tutorial.html#introduction">Introduction</a>
    <a class="dropdown-item" href="../articles/tutorial.html#sentence-and-token">Sentence and Token</a>
    <a class="dropdown-item" href="../articles/tutorial.html#sequence-taggings">Sequence Taggings</a>
    <a class="dropdown-item" href="../articles/tutorial.html#flair-embedding">Flair Embeddings</a>
    <a class="dropdown-item" href="../articles/tutorial.html#training-a-binary-classifier-in-flair">Training a Binary Classifier in flaiR</a>
    <a class="dropdown-item" href="../articles/tutorial.html#training-a-rnn-with-flair">Training a RNN with FlaiR</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--toolbox">
    <span class="fa fa-newspaper-o"></span>
     
    ToolBox
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--toolbox">
    <a class="dropdown-item" href="../articles/flair_models.html">Flar Pre-trianed Models</a>
    <a class="dropdown-item" href="../articles/transformer_wordembeddings.html">Wordembeddings in Flair</a>
    <a class="dropdown-item" href="../articles/highlight_text.html">Coloring Entities</a>
    <h6 class="dropdown-header" data-toc-skip>Visualizing the Sentiments (Comming Soon)</h6>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--reference">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--reference">
    <a class="dropdown-item" href="../reference/index.html#wrapper-functions">Wrapper Functions</a>
    <a class="dropdown-item" href="../reference/index.html#designed-flair-functions">Designed flaiR Functions</a>
    <a class="dropdown-item" href="../reference/index.html#tool-box">ToolBox</a>
    <a class="dropdown-item" href="../reference/index.html#utility-functions">Utility</a>
    <a class="dropdown-item" href="../reference/index.html#example-dataset">Dataset</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--news">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--news">
    <a class="dropdown-item" href="../news/index.html#flair-005-development-version">0.0.5</a>
    <a class="dropdown-item" href="../news/index.html#flair-004-development-version">0.0.4</a>
    <a class="dropdown-item" href="../news/index.html#flair-003-development-version">0.0.3</a>
    <a class="dropdown-item" href="../news/index.html#flair-001-development-version">0.0.1</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/davidycliao/flaiR">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Quick Start</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/davidycliao/flaiR/blob/HEAD/vignettes/quickstart.Rmd" class="external-link"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="d-none name"><code>quickstart.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="why-write-flair-to-access-fair-nlp-in-python">Why Write {flaiR} to Access fair NLP in Python?<a class="anchor" aria-label="anchor" href="#why-write-flair-to-access-fair-nlp-in-python"></a>
</h2>
<div style="text-align: justify">
<p>In Python, Flair ( developed by <a href="https://engineering.zalando.com/posts/2018/11/zalando-research-releases-flair.html" class="external-link">Zalando
Research</a>) stands out as a notably feature-rich and user-friendly NLP
framework. Flair provides intuitive interfaces with exceptional
multilingual support, especially for various embedding frameworks like
Glove, and transformer-based models such as BERT. It also comes equipped
with pre-trained models and context-aware capabilities. In addition,
Flair also establishes dependencies with primary NLP Python libraries
(such as gensim, transformer, flair, and more); installing
{<code>flaiR</code>} will subsequently install other related NLP
packages in Python. By installing the {<code>flaiR</code>} package in R,
users can seamlessly access the Python-based Flair library within R.
This integration allows for the use of basic Python libraries, like <a href="https://numpy.org" class="external-link">NumPy</a> and <a href="https://pandas.pydata.org" class="external-link">Pandas</a>, as well as modern NLP and
deep learning frameworks such as <a href="https://pytorch.org" class="external-link">PyTorch</a> and <a href="https://radimrehurek.com/gensim/intro.html" class="external-link">Gensim</a>, all
through the reticulate interface in an R environment.</p>
</div>
<p> </p>
<hr>
</div>
<div class="section level2">
<h2 id="install-flair-with-using-remotes">Install <code>flaiR</code> with Using <a href="https://github.com/r-lib/remotes" class="external-link"><code>remotes</code></a><a class="anchor" aria-label="anchor" href="#install-flair-with-using-remotes"></a>
</h2>
<div style="text-align: justify">
<p><code>flaiR</code> is built on top of the reticulate package and
incorporates key functions to access the core features of
<strong>FlairNLP</strong>, returning data in a tidy and clean <a href="https://cran.r-project.org/web/packages/data.table/index.html" class="external-link"><code>data.table</code></a>.
The installation consists of two parts: first, install <a href="https://www.python.org/downloads/" class="external-link">Python 3.7</a> or higher, and
second, install <a href="https://cran.r-project.org" class="external-link">R</a> (version
3.6.3 or higher) along with RStudio. <del>Additionally, you’ll also need
<a href="Anaconda"><code>Anaconda</code></a> to assist
<code>reticulate</code> in setting up your Python environment, as well
as enabling your RStudio to identify the environment.</del></p>
<p><strong>System Requirement:</strong></p>
<ul>
<li><p>Python (&gt;= 3.7.0)</p></li>
<li><p>R (&gt;= 3.6.3)</p></li>
<li><p>RStudio <strong><em>(recommended)</em></strong></p></li>
<li><p>Anaconda <strong><em>(optional)</em></strong></p></li>
</ul>
<p>If you’re using Python-based packages in R for the first time, such
as {<code>flaiR</code>} or {<code>reticulate</code>}, you probably
haven’t installed a Conda environment yet. When loading flaiR in R, two
main steps occur. First, <strong>a <a href="https://docs.conda.io/projects/conda/en/4.6.0/_downloads/52a95608c49671267e40c689e0bc00ca/conda-cheatsheet.pdf" class="external-link">conda</a>
environment is created through {<a href="https://ugoproto.github.io/ugo_r_doc/pdf/reticulate.pdf" class="external-link">reticulate</a>}</strong>.
During this process, you will observe numerous messages related to the
installation of the Python environment and the Python flair module.
Notably, flair has numerous dependencies, including libraries related to
transformers (like the Pytorch, gensim, flair and HuggingFace, etc).
Thus, the installation might take some time to complete.</p>
<p>When you copy the command below, you will generally be asked to
upgrade the package. This is because this package operates on the
{<code>reticulate</code>}, and when your packages in R are outdated,
RStudio would likely display <strong>“These packages have more recent
versions available.”</strong> to prompt you to update. We recommend that
you update.</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"davidycliao/flaiR"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">flaiR</span><span class="op">)</span></span></code></pre>
<p>Afterward, you might see the message <strong>“Virtual environment
‘r-reticulate’ successfully created.”</strong> Next, you will be
prompted to confirm whether or not you want to use
<code>r-reticulate</code>. Enter <strong>“Yes,”</strong> and it will
automatically install <code>flair</code> via your conda environment in
Python. If there are any issues with the installation, feel free to ask
in the <u><a href="https://github.com/davidycliao/flaiR/discussions" class="external-link">Discussion</a></u>.</p>
</div>
<p> </p>
<hr>
</div>
<div class="section level2">
<h2 id="wrapped-functions">Wrapped Functions<a class="anchor" aria-label="anchor" href="#wrapped-functions"></a>
</h2>
<div style="text-align: justify">
<p>For R users, {<code>flairR</code>} is built on top of {reticulate},
enabling you to interact directly with Python modules in R and providing
seamless support for documents in the R community. <strong>Please note
that the following basic examples and explanations are derived from the
official <a href="https://flairnlp.github.io/docs/intro" class="external-link">Flair NLP</a>
Python documentation and tutorial.</strong></p>
</div>
<table class="table">
<colgroup>
<col width="46%">
<col width="53%">
</colgroup>
<thead><tr class="header">
<th><strong>Wrapped Functions</strong></th>
<th>Corresponding Code Practice in Python</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="../reference/flair_datasets.html">flair_datasets()</a></code></td>
<td>from flair.datasets import *</td>
</tr>
<tr class="even">
<td><code><a href="../reference/flair_data.sentence.html">flair_data.sentence()</a></code></td>
<td>from flair.data import Sentence</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/flair_nn.html">flair_nn()</a></code></td>
<td>from flair_nn import *</td>
</tr>
<tr class="even">
<td><code><a href="../reference/flair_nn.classifier_load.html">flair_nn.classifier_load()</a></code></td>
<td>from flair.embeddings import Classifier</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/flair_embeddings.html">flair_embeddings()</a></code></td>
<td>from flair.nn import *</td>
</tr>
<tr class="even">
<td><code><a href="../reference/flair_embeddings.FlairEmbeddings.html">flair_embeddings.FlairEmbeddings()</a></code></td>
<td>from flair.embeddings import FlairEmbeddings</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/flair_embeddings.TransformerWordEmbeddings.html">flair_embeddings.TransformerWordEmbeddings()</a></code></td>
<td>from flair.embeddings import TransformerWordEmbeddings</td>
</tr>
<tr class="even">
<td><code><a href="../reference/flair_embeddings.WordEmbeddings.html">flair_embeddings.WordEmbeddings()</a></code></td>
<td>from flair.embeddings import WordEmbeddings</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/flair_embeddings.TransformerDocumentEmbeddings.html">flair_embeddings.TransformerDocumentEmbeddings()</a></code></td>
<td>from flair.embeddings import TransformerDocumentEmbeddings</td>
</tr>
<tr class="even">
<td><code><a href="../reference/flair_splitter.SegtokSentenceSplitter.html">flair_splitter.SegtokSentenceSplitter()</a></code></td>
<td>flair_splitter.SegtokSentenceSplitter</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/flair_models.sequencetagger.html">flair_models.sequencetagger()</a></code></td>
<td>from flair.models import SequenceTagger</td>
</tr>
<tr class="even">
<td><code><a href="../reference/flair_trainers.html">flair_trainers()</a></code></td>
<td>from flair.trainers import *</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/flair_models.html">flair_models()</a></code></td>
<td>from flair.models import *</td>
</tr>
<tr class="even">
<td><code><a href="../reference/flair_models.TextClassifier.html">flair_models.TextClassifier()</a></code></td>
<td>from flair.models import TextClassifier</td>
</tr>
</tbody>
</table>
<p> </p>
<div class="section level3">
<h3 id="tag-entities-in-text">
<strong>Tag Entities in Text</strong><a class="anchor" aria-label="anchor" href="#tag-entities-in-text"></a>
</h3>
<div style="text-align: justify">
<p>Let’s run named entity recognition over the following example
sentence: “I love Berlin and New York. To do this, all you need is to
make a Sentence for this text, load a pre-trained model and use it to
predict tags for the sentence object.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># attach flaiR in R</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">flaiR</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make a sentence</span></span>
<span></span>
<span><span class="va">Sentence</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_data.html">flair_data</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Sentence</span></span>
<span><span class="va">sentence</span> <span class="op">&lt;-</span> <span class="fu">Sentence</span><span class="op">(</span><span class="st">'I love Berlin and New York.'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the NER tagger</span></span>
<span><span class="va">Classifier</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_nn.html">flair_nn</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Classifier</span></span>
<span><span class="va">tagger</span> <span class="op">&lt;-</span> <span class="va">Classifier</span><span class="op">$</span><span class="fu">load</span><span class="op">(</span><span class="st">'ner'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 2023-10-20 00:15:29,540 SequenceTagger predicts: Dictionary with 20 tags: &lt;unk&gt;, O, S-ORG, S-MISC, B-PER, E-PER, S-LOC, B-ORG, E-ORG, I-PER, S-PER, B-MISC, I-MISC, E-MISC, I-ORG, B-LOC, E-LOC, I-LOC, &lt;START&gt;, &lt;STOP&gt;</span></span>
<span></span>
<span><span class="co"># run NER over sentence</span></span>
<span><span class="va">tagger</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">sentence</span><span class="op">)</span></span></code></pre></div>
<p>This should print:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print the sentence with all annotations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">)</span></span>
<span><span class="co">#&gt; Sentence[7]: "I love Berlin and New York." → ["Berlin"/LOC, "New York"/LOC]</span></span></code></pre></div>
<p>Use a for loop to print out each POS tag. It’s important to note that
Python is indexed from 0. Therefore, in an R environment, we must use
<code>seq_along(sentence$get_labels()) - 1</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">$</span><span class="fu">get_labels</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">$</span><span class="fu">get_labels</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="co">#&gt; 'Span[2:3]: "Berlin"'/'LOC' (0.9812)</span></span>
<span><span class="co">#&gt; 'Span[4:6]: "New York"'/'LOC' (0.9957)</span></span></code></pre></div>
</div>
<p> </p>
</div>
<div class="section level3">
<h3 id="tag-part-of-speech-in-text">
<strong>Tag Part-of-Speech in Text</strong><a class="anchor" aria-label="anchor" href="#tag-part-of-speech-in-text"></a>
</h3>
<div style="text-align: justify">
<p>We use flair/pos-english for POS tagging in the standard models on
Hugging Face.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># attach flaiR in R</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">flaiR</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make a sentence</span></span>
<span><span class="va">Sentence</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_data.html">flair_data</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Sentence</span></span>
<span><span class="va">sentence</span> <span class="op">&lt;-</span> <span class="fu">Sentence</span><span class="op">(</span><span class="st">'I love Berlin and New York.'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the NER tagger</span></span>
<span><span class="va">Classifier</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_nn.html">flair_nn</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Classifier</span></span>
<span><span class="va">tagger</span> <span class="op">&lt;-</span> <span class="va">Classifier</span><span class="op">$</span><span class="fu">load</span><span class="op">(</span><span class="st">'pos'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 2023-10-20 00:15:30,215 SequenceTagger predicts: Dictionary with 53 tags: &lt;unk&gt;, O, UH, ,, VBD, PRP, VB, PRP$, NN, RB, ., DT, JJ, VBP, VBG, IN, CD, NNS, NNP, WRB, VBZ, WDT, CC, TO, MD, VBN, WP, :, RP, EX, JJR, FW, XX, HYPH, POS, RBR, JJS, PDT, NNPS, RBS, AFX, WP$, -LRB-, -RRB-, ``, '', LS, $, SYM, ADD</span></span>
<span></span>
<span><span class="co"># run NER over sentence</span></span>
<span><span class="va">tagger</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">sentence</span><span class="op">)</span></span></code></pre></div>
<p>This should print:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print the sentence with all annotations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">)</span></span>
<span><span class="co">#&gt; Sentence[7]: "I love Berlin and New York." → ["I"/PRP, "love"/VBP, "Berlin"/NNP, "and"/CC, "New"/NNP, "York"/NNP, "."/.]</span></span></code></pre></div>
<p>Use a for loop to print out each pos tag.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">$</span><span class="fu">get_labels</span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">$</span><span class="fu">get_labels</span><span class="op">(</span><span class="op">)</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="co">#&gt; 'Token[0]: "I"'/'PRP' (1.0)</span></span>
<span><span class="co">#&gt; 'Token[1]: "love"'/'VBP' (1.0)</span></span>
<span><span class="co">#&gt; 'Token[2]: "Berlin"'/'NNP' (0.9999)</span></span>
<span><span class="co">#&gt; 'Token[3]: "and"'/'CC' (1.0)</span></span>
<span><span class="co">#&gt; 'Token[4]: "New"'/'NNP' (1.0)</span></span>
<span><span class="co">#&gt; 'Token[5]: "York"'/'NNP' (1.0)</span></span>
<span><span class="co">#&gt; 'Token[6]: "."'/'.' (1.0)</span></span></code></pre></div>
</div>
<p> </p>
</div>
<div class="section level3">
<h3 id="detect-sentiment">
<strong>Detect Sentiment</strong><a class="anchor" aria-label="anchor" href="#detect-sentiment"></a>
</h3>
<div style="text-align: justify">
<p>Let’s run sentiment analysis over the same sentence to determine
whether it is POSITIVE or NEGATIVE.</p>
<p>You can do this with essentially the same code as above. Just instead
of loading the ‘ner’ model, you now load the ‘sentiment’ model:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># attach flaiR in R</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">flaiR</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make a sentence</span></span>
<span><span class="va">Sentence</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_data.html">flair_data</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Sentence</span></span>
<span><span class="va">sentence</span> <span class="op">&lt;-</span> <span class="fu">Sentence</span><span class="op">(</span><span class="st">'I love Berlin and New York.'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the flair_nn.classifier_load tagger</span></span>
<span><span class="va">Classifier</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_nn.html">flair_nn</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">Classifier</span></span>
<span><span class="va">tagger</span> <span class="op">&lt;-</span> <span class="va">Classifier</span><span class="op">$</span><span class="fu">load</span><span class="op">(</span><span class="st">'sentiment'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># run sentiment analysis over sentence</span></span>
<span><span class="va">tagger</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">sentence</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print the sentence with all annotations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">)</span></span>
<span><span class="co">#&gt; Sentence[7]: "I love Berlin and New York." → POSITIVE (0.9982)</span></span></code></pre></div>
</div>
<p> </p>
</div>
<div class="section level3">
<h3 id="embeddings">
<strong>Embeddings</strong><a class="anchor" aria-label="anchor" href="#embeddings"></a>
</h3>
<p><strong>Embeddings Words with Transformers</strong></p>
<div style="text-align: justify">
<p>Let’s use a standard BERT model (bert-base-uncased) to embed the
sentence “the grass is green”. Simply instantate
<code><a href="../reference/flair_embeddings.TransformerWordEmbeddings.html">flair_embeddings.TransformerWordEmbeddings()</a></code> and call
<code>$embed()</code> over the sentence object:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># attach flaiR in R</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">flaiR</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># initiate TransformerWordEmbeddings</span></span>
<span><span class="va">TransformerWordEmbeddings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_embeddings.html">flair_embeddings</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">TransformerWordEmbeddings</span></span>
<span><span class="va">embedding</span> <span class="op">&lt;-</span> <span class="fu">TransformerWordEmbeddings</span><span class="op">(</span><span class="st">'bert-base-uncased'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a sentence</span></span>
<span><span class="va">sentence</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_data.sentence.html">flair_data.sentence</a></span><span class="op">(</span><span class="st">'The grass is green .'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># embed words in sentence</span></span>
<span><span class="va">embedding</span><span class="op">$</span><span class="fu">embed</span><span class="op">(</span><span class="va">sentence</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; Sentence[5]: "The grass is green ."</span></span></code></pre></div>
<p>This will cause each word in the sentence to be embedded. You can
iterate through the words and get each embedding like this:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">$</span><span class="va">tokens</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Token: "</span>,  <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_str.html" class="external-link">py_str</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">$</span><span class="va">tokens</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="co"># Access the embedding of the token, converting it to an R object, </span></span>
<span>  <span class="co"># and print the first 15 elements of the vector.</span></span>
<span>  <span class="va">token_embedding</span> <span class="op">&lt;-</span> <span class="va">sentence</span><span class="op">$</span><span class="va">tokens</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">embedding</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">token_embedding</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Token:  Token[0]: "The" </span></span>
<span><span class="co">#&gt; tensor([-0.3904, -1.1946,  0.1296,  0.5806, -0.0847, -0.4520,  1.3699,  0.3850,</span></span>
<span><span class="co">#&gt;         -0.6132, -0.3246, -0.9899, -0.6897,  0.2754, -0.5867,  0.2399])</span></span>
<span><span class="co">#&gt; Token:  Token[1]: "grass" </span></span>
<span><span class="co">#&gt; tensor([-0.3904, -1.1946,  0.1296,  0.5806, -0.0847, -0.4520,  1.3699,  0.3850,</span></span>
<span><span class="co">#&gt;         -0.6132, -0.3246, -0.9899, -0.6897,  0.2754, -0.5867,  0.2399])</span></span>
<span><span class="co">#&gt; Token:  Token[2]: "is" </span></span>
<span><span class="co">#&gt; tensor([-0.3904, -1.1946,  0.1296,  0.5806, -0.0847, -0.4520,  1.3699,  0.3850,</span></span>
<span><span class="co">#&gt;         -0.6132, -0.3246, -0.9899, -0.6897,  0.2754, -0.5867,  0.2399])</span></span>
<span><span class="co">#&gt; Token:  Token[3]: "green" </span></span>
<span><span class="co">#&gt; tensor([-0.3904, -1.1946,  0.1296,  0.5806, -0.0847, -0.4520,  1.3699,  0.3850,</span></span>
<span><span class="co">#&gt;         -0.6132, -0.3246, -0.9899, -0.6897,  0.2754, -0.5867,  0.2399])</span></span>
<span><span class="co">#&gt; Token:  Token[4]: "." </span></span>
<span><span class="co">#&gt; tensor([-0.3904, -1.1946,  0.1296,  0.5806, -0.0847, -0.4520,  1.3699,  0.3850,</span></span>
<span><span class="co">#&gt;         -0.6132, -0.3246, -0.9899, -0.6897,  0.2754, -0.5867,  0.2399])</span></span></code></pre></div>
</div>
<p> </p>
<p><strong>Embeddings Documents with Transformers</strong></p>
<div style="text-align: justify">
<p>Sometimes you want to have an embedding for a whole document, not
only individual words. In this case, use one of the DocumentEmbeddings
classes in Flair. Let’s again use a standard BERT model to get an
embedding for the entire sentence:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># initiate TransformerWordEmbeddings</span></span>
<span><span class="va">embedding</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_embeddings.TransformerDocumentEmbeddings.html">flair_embeddings.TransformerDocumentEmbeddings</a></span><span class="op">(</span><span class="st">'bert-base-uncased'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create a sentence</span></span>
<span><span class="va">sentence</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_data.sentence.html">flair_data.sentence</a></span><span class="op">(</span><span class="st">'The grass is green .'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># embed words in sentence</span></span>
<span><span class="va">embedding</span><span class="op">$</span><span class="fu">embed</span><span class="op">(</span><span class="va">sentence</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; Sentence[5]: "The grass is green ."</span></span></code></pre></div>
<p>Use the <code>$embedding</code> method to extract the entire
embedding from the sentence and print the embedding as follows:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">$</span><span class="va">embedding</span>, n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; tensor([-0.0717, -0.4132, -0.3651,  0.0199, -0.6143, -0.0525,  1.2074, -0.0852,</span></span>
<span><span class="co">#&gt;         -0.3331,  0.0753, -0.3081, -0.2436,  0.6264,  0.0861,  0.1762, -0.5427,</span></span>
<span><span class="co">#&gt;          0.4518,  0.5222, -0.0022,  0.2461])</span></span></code></pre></div>
</div>
<p> </p>
<p><strong>How to Stack Embeddings</strong></p>
<div style="text-align: justify">
<p>Flair allows you to combine embeddings into “embedding stacks”. When
not fine-tuning, using combinations of embeddings often gives best
results!</p>
<p>Use the <code>StackedEmbeddings</code> class and instantiate it by
passing a list of embeddings that you wish to combine. For instance,
lets combine classic <code>GloVe</code> embeddings with
<code>forward</code> and <code>backward</code> Flair embeddings.</p>
<p>First, instantiate the two embeddings you wish to combine:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># init standard GloVe embedding</span></span>
<span><span class="va">glove_embedding</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_embeddings.WordEmbeddings.html">flair_embeddings.WordEmbeddings</a></span><span class="op">(</span><span class="st">'glove'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># init Flair forward and backwards embeddings</span></span>
<span><span class="va">flair_embedding_forward</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_embeddings.FlairEmbeddings.html">flair_embeddings.FlairEmbeddings</a></span><span class="op">(</span><span class="st">'news-forward'</span><span class="op">)</span></span>
<span><span class="co">#&gt; Initialized Flair forward embeddings</span></span>
<span><span class="va">flair_embedding_backward</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_embeddings.FlairEmbeddings.html">flair_embeddings.FlairEmbeddings</a></span><span class="op">(</span><span class="st">'news-backward'</span><span class="op">)</span></span>
<span><span class="co">#&gt; Initialized Flair backward embeddings</span></span></code></pre></div>
<p>Now, instantiate the <code>StackedEmbeddings</code> class and pass a
list containing these two embeddings. Both R and Python have list
functionality. Let’s create a StackedEmbedding object that combines the
GloVe and forward/backward Flair embeddings.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stacked_embeddings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_embeddings.html">flair_embeddings</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">StackedEmbeddings</span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">glove_embedding</span>,</span>
<span>       <span class="va">flair_embedding_forward</span>, </span>
<span>       <span class="va">flair_embedding_backward</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Next, use the <code>$embed()</code> method to transform text into
vectors for your sentences.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make a sentence</span></span>
<span><span class="va">sentence</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flair_data.sentence.html">flair_data.sentence</a></span><span class="op">(</span><span class="st">'I love Berlin and New York.'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># just embed a sentence using the StackedEmbedding as you would with any single embedding.</span></span>
<span><span class="va">stacked_embeddings</span><span class="op">$</span><span class="fu">embed</span><span class="op">(</span><span class="va">sentence</span><span class="op">)</span></span></code></pre></div>
<p>Words are now embedded using a concatenation of three different
embeddings. This means that the resulting embedding vector is still a
single PyTorch vector.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">$</span><span class="va">tokens</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Token: "</span>,  <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_str.html" class="external-link">py_str</a></span><span class="op">(</span><span class="va">sentence</span><span class="op">$</span><span class="va">tokens</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="co"># Access the embedding of the token, converting it to an R object, </span></span>
<span>  <span class="co"># and print the first 15 elements of the vector.</span></span>
<span>  <span class="va">token_embedding</span> <span class="op">&lt;-</span> <span class="va">sentence</span><span class="op">$</span><span class="va">tokens</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">embedding</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">token_embedding</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Token:  Token[0]: "I" </span></span>
<span><span class="co">#&gt; tensor([ 0.6197,  0.5665, -0.4658, -1.1890,  0.4460,  0.0660,  0.3191,  0.1468,</span></span>
<span><span class="co">#&gt;         -0.2212,  0.7924,  0.2991,  0.1607,  0.0253,  0.1868, -0.3100])</span></span>
<span><span class="co">#&gt; Token:  Token[1]: "love" </span></span>
<span><span class="co">#&gt; tensor([ 0.6197,  0.5665, -0.4658, -1.1890,  0.4460,  0.0660,  0.3191,  0.1468,</span></span>
<span><span class="co">#&gt;         -0.2212,  0.7924,  0.2991,  0.1607,  0.0253,  0.1868, -0.3100])</span></span>
<span><span class="co">#&gt; Token:  Token[2]: "Berlin" </span></span>
<span><span class="co">#&gt; tensor([ 0.6197,  0.5665, -0.4658, -1.1890,  0.4460,  0.0660,  0.3191,  0.1468,</span></span>
<span><span class="co">#&gt;         -0.2212,  0.7924,  0.2991,  0.1607,  0.0253,  0.1868, -0.3100])</span></span>
<span><span class="co">#&gt; Token:  Token[3]: "and" </span></span>
<span><span class="co">#&gt; tensor([ 0.6197,  0.5665, -0.4658, -1.1890,  0.4460,  0.0660,  0.3191,  0.1468,</span></span>
<span><span class="co">#&gt;         -0.2212,  0.7924,  0.2991,  0.1607,  0.0253,  0.1868, -0.3100])</span></span>
<span><span class="co">#&gt; Token:  Token[4]: "New" </span></span>
<span><span class="co">#&gt; tensor([ 0.6197,  0.5665, -0.4658, -1.1890,  0.4460,  0.0660,  0.3191,  0.1468,</span></span>
<span><span class="co">#&gt;         -0.2212,  0.7924,  0.2991,  0.1607,  0.0253,  0.1868, -0.3100])</span></span>
<span><span class="co">#&gt; Token:  Token[5]: "York" </span></span>
<span><span class="co">#&gt; tensor([ 0.6197,  0.5665, -0.4658, -1.1890,  0.4460,  0.0660,  0.3191,  0.1468,</span></span>
<span><span class="co">#&gt;         -0.2212,  0.7924,  0.2991,  0.1607,  0.0253,  0.1868, -0.3100])</span></span>
<span><span class="co">#&gt; Token:  Token[6]: "." </span></span>
<span><span class="co">#&gt; tensor([ 0.6197,  0.5665, -0.4658, -1.1890,  0.4460,  0.0660,  0.3191,  0.1468,</span></span>
<span><span class="co">#&gt;         -0.2212,  0.7924,  0.2991,  0.1607,  0.0253,  0.1868, -0.3100])</span></span></code></pre></div>
</div>
<p> </p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="featured-functions-for-nlp-tasks-with-data-table-output">Featured Functions for NLP Tasks with data.table Output<a class="anchor" aria-label="anchor" href="#featured-functions-for-nlp-tasks-with-data-table-output"></a>
</h2>
<div style="text-align: justify">
<p>To enhance more efficient utilization in social science research,
{flairR} extends FlairNLP with three principal functions to extract
features in a neat format with <a href="https://cran.r-project.org/web/packages/data.table/index.html" class="external-link">data.table</a>.
Through these featured functions, you don’t have to write loops to
format parsed output on your own; {<code>flairR</code>} will
automatically do it for you in a neat format. The main features include
<a href="https://davidycliao.github.io/flaiR/articles/get_pos.html"><strong>part-of-speech
tagging</strong></a>, <a href="https://davidycliao.github.io/flaiR/articles/get_entities.html"><strong>transformer-based
sentiment analysis</strong></a>, and <a href="https://davidycliao.github.io/flaiR/articles/get_sentiments.html"><strong>named
entity recognition</strong></a>. In addition, to handle the load on RAM
when dealing with larger corpus, {<code>flairR</code>} supports batch
processing to handle texts in batches, which is especially useful when
dealing with large datasets, to optimize memory usage and
performance.</p>
<table class="table">
<colgroup>
<col width="23%">
<col width="14%">
<col width="62%">
</colgroup>
<thead><tr class="header">
<th><strong>Core Featured Function in flaiR</strong></th>
<th>Loader</th>
<th>Supported Models from Flair NLP</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code><a href="../reference/get_entities.html">get_entities()</a></code>, <code><a href="../reference/get_entities_batch.html">get_entities_batch()</a></code>
</td>
<td><code><a href="../reference/load_tagger_ner.html">load_tagger_ner()</a></code></td>
<td>
<code>en</code> (English), <code>fr</code> (French), <code>da</code>
(Danish), <code>nl</code> (Dutch), and more.</td>
</tr>
<tr class="even">
<td>
<code><a href="../reference/get_pos.html">get_pos()</a></code>, <code><a href="../reference/get_pos_batch.html">get_pos_batch()</a></code>
</td>
<td><code><a href="../reference/load_tagger_pos.html">load_tagger_pos()</a></code></td>
<td>
<code>pos</code> (English POS), <code>fr-pos</code> (French POS),
<code>de-pos</code> (German POS), <code>nl-pos</code> (Dutch POS), and
more.</td>
</tr>
<tr class="odd">
<td>
<code><a href="../reference/get_sentiments.html">get_sentiments()</a></code>,
<code><a href="../reference/get_sentiments_batch.html">get_sentiments_batch()</a></code>
</td>
<td><code><a href="../reference/load_tagger_sentiments.html">load_tagger_sentiments()</a></code></td>
<td>
<code>sentiment</code> (English) ,
<code>sentiment-fast</code>(English) ,
<code>de-offensive-language</code> (German offensive language detection
model)</td>
</tr>
</tbody>
</table>
</div>
<p> </p>
<div class="section level3">
<h3 id="tagging-parts-of-speech-with-flair-models">
<strong>Tagging Parts-of-Speech with Flair Models</strong><a class="anchor" aria-label="anchor" href="#tagging-parts-of-speech-with-flair-models"></a>
</h3>
<div style="text-align: justify">
<p>You can load the pre-trained model <code>"pos-fast"</code>. For more
pre-trained models, see <a href="https://flairnlp.github.io/docs/tutorial-basics/part-of-speech-tagging#-in-english" class="external-link uri">https://flairnlp.github.io/docs/tutorial-basics/part-of-speech-tagging#-in-english</a>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">texts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"UCD is one of the best universities in Ireland."</span>,</span>
<span>           <span class="st">"UCD has a good campus but is very far from my apartment in Dublin."</span>,</span>
<span>           <span class="st">"Essex is famous for social science research."</span>,</span>
<span>           <span class="st">"Essex is not in the Russell Group, but it is famous for political science research and in 1994 Group."</span>,</span>
<span>           <span class="st">"TCD is the oldest university in Ireland."</span>,</span>
<span>           <span class="st">"TCD is similar to Oxford."</span><span class="op">)</span></span>
<span></span>
<span><span class="va">doc_ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"doc1"</span>, <span class="st">"doc2"</span>, <span class="st">"doc3"</span>, <span class="st">"doc4"</span>, <span class="st">"doc5"</span>, <span class="st">"doc6"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">flaiR</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tagger_pos</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_tagger_pos.html">load_tagger_pos</a></span><span class="op">(</span><span class="st">"pos-fast"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 2023-10-20 00:15:37,773 SequenceTagger predicts: Dictionary with 53 tags: &lt;unk&gt;, O, UH, ,, VBD, PRP, VB, PRP$, NN, RB, ., DT, JJ, VBP, VBG, IN, CD, NNS, NNP, WRB, VBZ, WDT, CC, TO, MD, VBN, WP, :, RP, EX, JJR, FW, XX, HYPH, POS, RBR, JJS, PDT, NNPS, RBS, AFX, WP$, -LRB-, -RRB-, ``, '', LS, $, SYM, ADD</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_pos.html">get_pos</a></span><span class="op">(</span><span class="va">texts</span>, <span class="va">doc_ids</span>, <span class="va">tagger_pos</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">results</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;     doc_id token_id text_id        token tag precision</span></span>
<span><span class="co">#&gt;  1:   doc1        0      NA          UCD NNP    0.9967</span></span>
<span><span class="co">#&gt;  2:   doc1        1      NA           is VBZ    1.0000</span></span>
<span><span class="co">#&gt;  3:   doc1        2      NA          one  CD    0.9993</span></span>
<span><span class="co">#&gt;  4:   doc1        3      NA           of  IN    1.0000</span></span>
<span><span class="co">#&gt;  5:   doc1        4      NA          the  DT    1.0000</span></span>
<span><span class="co">#&gt;  6:   doc1        5      NA         best JJS    0.9988</span></span>
<span><span class="co">#&gt;  7:   doc1        6      NA universities NNS    0.9997</span></span>
<span><span class="co">#&gt;  8:   doc1        7      NA           in  IN    1.0000</span></span>
<span><span class="co">#&gt;  9:   doc1        8      NA      Ireland NNP    1.0000</span></span>
<span><span class="co">#&gt; 10:   doc1        9      NA            .   .    0.9998</span></span></code></pre></div>
</div>
<p> </p>
</div>
<div class="section level3">
<h3 id="tagging-entities-with-flair-models">
<strong>Tagging Entities with Flair Models</strong><a class="anchor" aria-label="anchor" href="#tagging-entities-with-flair-models"></a>
</h3>
<div style="text-align: justify">
<p>Load the pretrained model “ner”. For more pretrained models, see <a href="https://flairnlp.github.io/docs/tutorial-basics/tagging-entities" class="external-link uri">https://flairnlp.github.io/docs/tutorial-basics/tagging-entities</a>.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">flaiR</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tagger_ner</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_tagger_ner.html">load_tagger_ner</a></span><span class="op">(</span><span class="st">"ner"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 2023-10-20 00:15:39,179 SequenceTagger predicts: Dictionary with 20 tags: &lt;unk&gt;, O, S-ORG, S-MISC, B-PER, E-PER, S-LOC, B-ORG, E-ORG, I-PER, S-PER, B-MISC, I-MISC, E-MISC, I-ORG, B-LOC, E-LOC, I-LOC, &lt;START&gt;, &lt;STOP&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_entities.html">get_entities</a></span><span class="op">(</span><span class="va">texts</span>, <span class="va">doc_ids</span>, <span class="va">tagger_ner</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">results</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;     doc_id        entity tag</span></span>
<span><span class="co">#&gt;  1:   doc1           UCD ORG</span></span>
<span><span class="co">#&gt;  2:   doc1       Ireland LOC</span></span>
<span><span class="co">#&gt;  3:   doc2           UCD ORG</span></span>
<span><span class="co">#&gt;  4:   doc2        Dublin LOC</span></span>
<span><span class="co">#&gt;  5:   doc3         Essex ORG</span></span>
<span><span class="co">#&gt;  6:   doc4         Essex ORG</span></span>
<span><span class="co">#&gt;  7:   doc4 Russell Group ORG</span></span>
<span><span class="co">#&gt;  8:   doc5           TCD ORG</span></span>
<span><span class="co">#&gt;  9:   doc5       Ireland LOC</span></span>
<span><span class="co">#&gt; 10:   doc6           TCD ORG</span></span></code></pre></div>
</div>
<p> </p>
</div>
<div class="section level3">
<h3 id="tagging-sentiment">
<strong>Tagging Sentiment</strong><a class="anchor" aria-label="anchor" href="#tagging-sentiment"></a>
</h3>
<div style="text-align: justify">
<p>Load the pretrained model “<code>sentiment</code>”. The pre-trained
models of “<code>sentiment</code>”, “<code>sentiment-fast</code>”, and
“<code>de-offensive-language</code>” are currently available. For more
pretrained models, see <a href="https://flairnlp.github.io/docs/tutorial-basics/tagging-sentiment" class="external-link uri">https://flairnlp.github.io/docs/tutorial-basics/tagging-sentiment</a>.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">flaiR</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tagger_sent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_tagger_sentiments.html">load_tagger_sentiments</a></span><span class="op">(</span><span class="st">"sentiment"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="va">texts</span>, <span class="va">doc_ids</span>, <span class="va">tagger_sent</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">results</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;    doc_id sentiment     score</span></span>
<span><span class="co">#&gt; 1:   doc1  POSITIVE 0.9970598</span></span>
<span><span class="co">#&gt; 2:   doc2  NEGATIVE 0.8472336</span></span>
<span><span class="co">#&gt; 3:   doc3  POSITIVE 0.9928006</span></span>
<span><span class="co">#&gt; 4:   doc4  POSITIVE 0.9901405</span></span>
<span><span class="co">#&gt; 5:   doc5  POSITIVE 0.9952670</span></span>
<span><span class="co">#&gt; 6:   doc6  POSITIVE 0.9291794</span></span></code></pre></div>
</div>
<p> </p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="how-to-contribute">How to Contribute<a class="anchor" aria-label="anchor" href="#how-to-contribute"></a>
</h2>
<div style="text-align: justify">
<p>R developers who want to contribute to {<code>flaiR</code>} are
welcome – {<code>flaiR</code>} is an open source project. I warmly
invite R users who share similar interests to join in contributing to
this package. Please feel free to shoot me an email to collaborate on
the task. Contributions – whether they be comments, code suggestions,
tutorial examples, or forking the repository – are greatly appreciated.
Please note that the <code>flaiR</code> is released with the <a href="https://github.com/davidycliao/flaiR/blob/master/CONDUCT.md" class="external-link">Contributor
Code of Conduct</a>. By contributing to this project, you agree to abide
by its terms.</p>
<p>The primary communication channel for R users can be found <a href="https://github.com/davidycliao/flaiR/discussions" class="external-link">here</a>.Please
feel free to share your insights on the <a href="https://github.com/davidycliao/flaiR/discussions" class="external-link">Discussion</a>
page and report any issues related to the R interface in the <a href="https://github.com/davidycliao/flaiR/issues" class="external-link">Issue</a>
section.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://davidycliao.github.io" class="external-link">David Liao</a>, Akbik Alan, Blythe Duncan, Vollgraf Roland.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer>
</body>
</html>
